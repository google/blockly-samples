<!DOCTYPE html>
  <head>
  <!-- INJECTED HEADER -->
  <meta name="viewport" content="width=device-width,maximum-scale=2">
  <link rel="icon" type="image/x-icon" href="/blockly-samples/favicon.ico" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,500,500italic,700,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://blocklycodelabs.dev/styles/main.css" />
  <link rel="stylesheet" href="/blockly-samples/css/custom.css"/>
  <!-- END INJECTED HEADER -->
    <title>@blockly/shadow-block-converter Demo</title>
  </head>
  <body class="root" class="root">
    
  <!-- NAV BAR -->
  <nav id="toolbar">
    <a href="/blockly-samples/" id="arrow-back">
      <i class="material-icons">close</i>
      <img src="https://blocklycodelabs.dev/images/logo_knockout.png" class="logo-devs"
        alt="Blockly logo" />
    </a>

    <div class="title-grow">
      <div class="title">@blockly/shadow-block-converter Demo</div>
      <div class="subtitle">A workspace change listener that converts shadow blocks to real blocks when the user edits them.</div>
    </div>
    6.0.16

    <a href="https://github.com/google/blockly-samples/blob/master/plugins/shadow-block-converter" class="button" target="_blank">View code</a>
    <a href="https://www.npmjs.com/package/@blockly/shadow-block-converter" class="button" target="_blank">View on npm</a>
  </nav>
  <!-- END NAV BAR -->
    <main id="main" class="has-tabs">
      <div class="drop-shadow"></div>
      
  <!-- PAGE TABS -->
  <ul id="tabs">
    <li>
      <a href="/blockly-samples/plugins/shadow-block-converter/test/index">
        Playground
      </a>
    </li>
    <li>
      <a href="/blockly-samples/plugins/shadow-block-converter/README">
        README
      </a>
    </li>
  </ul>
  <!-- END PAGE TABS -->
      
    <article class="article-container site-width">
      <div class="article">
      <h1 id="blocklyshadow-block-converter-built-on-blocklyhttpstinyurlcombuilt-on-blocklyhttpsgithubcomgoogleblockly">@blockly/shadow-block-converter <a href="https://github.com/google/blockly"><img src="https://tinyurl.com/built-on-blockly" alt="Built on Blockly" /></a></h1>
<p>A <a href="https://www.npmjs.com/package/blockly">Blockly</a> plugin for automatically converting shadow blocks to regular blocks when the user edits them.</p>
<h2 id="installation">Installation</h2>
<h3 id="yarn">Yarn</h3>
<pre><code>yarn add @blockly/shadow-block-converter</code></pre>
<h3 id="npm">npm</h3>
<pre><code>npm install @blockly/shadow-block-converter --save</code></pre>
<h2 id="usage">Usage</h2>
<p>This plugin exports a function called <code>shadowBlockConversionChangeListener</code>. If
you add it as a change listener to your Blockly workspace then any shadow block
the user edits will be converted to a regular block. This allows the user to
move or delete the block, in which case the original shadow block will
automatically return. With this plugin, shadow blocks behave like a persistent
default value associated with the parent block (unlike standard Blockly
behavior, where shadow blocks retain any edits made to them even after a regular
block is dragged on top of them).</p>
<p>The regular block will be a new block instance, separate from the shadow block
that was replaced, and will have a different id. It will otherwise have the same
properties and shape as the original shadow block.</p>
<p>If the shadow block was attached to any ancestor blocks that were also shadows,
they will be recreated as regular blocks. If the shadow block was attached to
any descendent blocks, they will be recreated with different ids but will still
be shadow blocks.</p>
<p>See below for an example using it with a workspace.</p>
<h3 id="javascript">JavaScript</h3>
<pre><code class="js language-js">import * as Blockly from 'blockly';
import {shadowBlockConversionChangeListener} from '@blockly/shadow-block-converter';

function start() {
  const workspace = Blockly.inject('blocklyDiv', {toolbox: toolbox});
  workspace.addChangeListener(shadowBlockConversionChangeListener);
}</code></pre>
<h2 id="license">License</h2>
<p>Apache 2.0</p>
      </div>
    </article>
  </main>
  <!-- FOOTER  -->
  <footer id="footer">
    <div class="footer-wrapper site-width">
      <div class="link-list">
        <label>Developer Resources</label>
        <ul>
          <li><a target="_blank" href="https://developers.google.com/blockly/guides/overview/">Developer Docs</a></li>
          <li><a target="_blank" href="https://blocklycodelabs.dev/">Codelabs</a></li>
          <li><a target="_blank" href="https://google.github.io/blockly-samples/developer-tools/index.html">Developer
              Tools</a></li>
        </ul>
      </div>
      <div class="link-list">
        <label>Github</label>
        <ul>
          <li><a target="_blank" href="https://github.com/google/blockly/">Blockly Sources</a></li>
          <li><a target="_blank" href="https://github.com/google/blockly-samples/">Blockly Samples</a></li>
        </ul>
      </div>
      <div class="link-list">
        <label>Support</label>
        <ul>
          <li><a target="_blank" href="https://groups.google.com/forum/#!forum/blockly/">Support</a></li>
        </ul>
        <div>Published with <a href="https://pages.github.com">GitHub Pages</a></div>
      </div>
    </div>
  </footer>
  <!-- END FOOTER -->
</body>
 </html>
  